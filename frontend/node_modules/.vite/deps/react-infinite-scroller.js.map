{
  "version": 3,
  "sources": ["../../react-infinite-scroller/src/InfiniteScroll.js"],
  "sourcesContent": ["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class InfiniteScroll extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    element: PropTypes.node,\n    hasMore: PropTypes.bool,\n    initialLoad: PropTypes.bool,\n    isReverse: PropTypes.bool,\n    loader: PropTypes.node,\n    loadMore: PropTypes.func.isRequired,\n    pageStart: PropTypes.number,\n    ref: PropTypes.func,\n    getScrollParent: PropTypes.func,\n    threshold: PropTypes.number,\n    useCapture: PropTypes.bool,\n    useWindow: PropTypes.bool\n  };\n\n  static defaultProps = {\n    element: 'div',\n    hasMore: false,\n    initialLoad: true,\n    pageStart: 0,\n    ref: null,\n    threshold: 250,\n    useWindow: true,\n    isReverse: false,\n    useCapture: false,\n    loader: null,\n    getScrollParent: null\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.scrollListener = this.scrollListener.bind(this);\n    this.eventListenerOptions = this.eventListenerOptions.bind(this);\n    this.mousewheelListener = this.mousewheelListener.bind(this);\n  }\n\n  componentDidMount() {\n    this.pageLoaded = this.props.pageStart;\n    this.options = this.eventListenerOptions();\n    this.attachScrollListener();\n  }\n\n  componentDidUpdate() {\n    if (this.props.isReverse && this.loadMore) {\n      const parentElement = this.getParentElement(this.scrollComponent);\n      parentElement.scrollTop =\n        parentElement.scrollHeight -\n        this.beforeScrollHeight +\n        this.beforeScrollTop;\n      this.loadMore = false;\n    }\n    this.attachScrollListener();\n  }\n\n  componentWillUnmount() {\n    this.detachScrollListener();\n    this.detachMousewheelListener();\n  }\n\n  isPassiveSupported() {\n    let passive = false;\n\n    const testOptions = {\n      get passive() {\n        passive = true;\n      }\n    };\n\n    try {\n      document.addEventListener('test', null, testOptions);\n      document.removeEventListener('test', null, testOptions);\n    } catch (e) {\n      // ignore\n    }\n    return passive;\n  }\n\n  eventListenerOptions() {\n    let options = this.props.useCapture;\n\n    if (this.isPassiveSupported()) {\n      options = {\n        useCapture: this.props.useCapture,\n        passive: true\n      };\n    } else {\n      options = {\n        passive: false\n      };\n    }\n    return options;\n  }\n\n  // Set a defaut loader for all your `InfiniteScroll` components\n  setDefaultLoader(loader) {\n    this.defaultLoader = loader;\n  }\n\n  detachMousewheelListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.scrollComponent.parentNode;\n    }\n\n    scrollEl.removeEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.options ? this.options : this.props.useCapture\n    );\n  }\n\n  detachScrollListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.removeEventListener(\n      'scroll',\n      this.scrollListener,\n      this.options ? this.options : this.props.useCapture\n    );\n    scrollEl.removeEventListener(\n      'resize',\n      this.scrollListener,\n      this.options ? this.options : this.props.useCapture\n    );\n  }\n\n  getParentElement(el) {\n    const scrollParent =\n      this.props.getScrollParent && this.props.getScrollParent();\n    if (scrollParent != null) {\n      return scrollParent;\n    }\n    return el && el.parentNode;\n  }\n\n  filterProps(props) {\n    return props;\n  }\n\n  attachScrollListener() {\n    const parentElement = this.getParentElement(this.scrollComponent);\n\n    if (!this.props.hasMore || !parentElement) {\n      return;\n    }\n\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = parentElement;\n    }\n\n    scrollEl.addEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.options ? this.options : this.props.useCapture\n    );\n    scrollEl.addEventListener(\n      'scroll',\n      this.scrollListener,\n      this.options ? this.options : this.props.useCapture\n    );\n    scrollEl.addEventListener(\n      'resize',\n      this.scrollListener,\n      this.options ? this.options : this.props.useCapture\n    );\n\n    if (this.props.initialLoad) {\n      this.scrollListener();\n    }\n  }\n\n  mousewheelListener(e) {\n    // Prevents Chrome hangups\n    // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n    if (e.deltaY === 1 && !this.isPassiveSupported()) {\n      e.preventDefault();\n    }\n  }\n\n  scrollListener() {\n    const el = this.scrollComponent;\n    const scrollEl = window;\n    const parentNode = this.getParentElement(el);\n\n    let offset;\n    if (this.props.useWindow) {\n      const doc =\n        document.documentElement || document.body.parentNode || document.body;\n      const scrollTop =\n        scrollEl.pageYOffset !== undefined\n          ? scrollEl.pageYOffset\n          : doc.scrollTop;\n      if (this.props.isReverse) {\n        offset = scrollTop;\n      } else {\n        offset = this.calculateOffset(el, scrollTop);\n      }\n    } else if (this.props.isReverse) {\n      offset = parentNode.scrollTop;\n    } else {\n      offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n    }\n\n    // Here we make sure the element is visible as well as checking the offset\n    if (\n      offset < Number(this.props.threshold) &&\n      (el && el.offsetParent !== null)\n    ) {\n      this.detachScrollListener();\n      this.beforeScrollHeight = parentNode.scrollHeight;\n      this.beforeScrollTop = parentNode.scrollTop;\n      // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n      if (typeof this.props.loadMore === 'function') {\n        this.props.loadMore((this.pageLoaded += 1));\n        this.loadMore = true;\n      }\n    }\n  }\n\n  calculateOffset(el, scrollTop) {\n    if (!el) {\n      return 0;\n    }\n\n    return (\n      this.calculateTopPosition(el) +\n      (el.offsetHeight - scrollTop - window.innerHeight)\n    );\n  }\n\n  calculateTopPosition(el) {\n    if (!el) {\n      return 0;\n    }\n    return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n  }\n\n  render() {\n    const renderProps = this.filterProps(this.props);\n    const {\n      children,\n      element,\n      hasMore,\n      initialLoad,\n      isReverse,\n      loader,\n      loadMore,\n      pageStart,\n      ref,\n      threshold,\n      useCapture,\n      useWindow,\n      getScrollParent,\n      ...props\n    } = renderProps;\n\n    props.ref = node => {\n      this.scrollComponent = node;\n      if (ref) {\n        ref(node);\n      }\n    };\n\n    const childrenArray = [children];\n    if (hasMore) {\n      if (loader) {\n        isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n      } else if (this.defaultLoader) {\n        isReverse\n          ? childrenArray.unshift(this.defaultLoader)\n          : childrenArray.push(this.defaultLoader);\n      }\n    }\n    return React.createElement(element, props, childrenArray);\n  }\n}\n"],
  "mappings": "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",
  "names": ["React", "PropTypes"]
}
